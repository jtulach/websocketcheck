<!DOCTYPE html>
<html>
    <head>
        <title>WebSocket Check</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width">
    </head>
    <body>
        <h1>WebSocket Check</h1>
        <pre id="log">
        </pre>
        <script>
        (function() {
            var uri = "ws://" + window.location.host + "/app";
            log("connecting to " + uri)
            var ws = new WebSocket(uri);
            ws.onopen = function() {
                log("connection established");
                ws.send("init");
                log("init message sent");
            }
            ws.onmessage = function(ev) {
                log("reply received: " + ev.data);
            };

            function log(t) {
                var e = document.getElementById('log');
                t = e.innerHTML + '\n' + t;
                e.innerHTML = t;
            }
        })();
        </script>
    </body>
</html>
